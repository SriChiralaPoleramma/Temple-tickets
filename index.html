<!DOCTYPE html>
<html lang="te">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∞∂‡±ç‡∞∞‡±Ä ‡∞™‡±ã‡∞≤‡±á‡∞∞‡∞Æ‡±ç‡∞Æ ‡∞§‡∞≤‡±ç‡∞≤‡∞ø | Divine Floral Portal</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Mukta+Vaani:wght@400;700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        /* COLOR PALETTE: Floral Marigold Orange & Jasmine White */
        :root {
            --marigold: #f37021;
            --jasmine: #fffbf2;
            --temple-red: #8e0000;
            --leaf-green: #2e7d32;
        }

        * { box-sizing: border-box; transition: all 0.3s ease; }
        body { 
            font-family: 'Mukta Vaani', sans-serif; 
            background-color: var(--jasmine); 
            margin: 0; overflow-x: hidden;
        }

        /* FLORAL BACKGROUND: Subtle pattern to look like a temple floor */
        .floral-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            opacity: 0.4; z-index: -1;
        }

        /* HEADER: Decorated with Marigold flower garland effect */
        header { 
            background: linear-gradient(135deg, #ff9800, var(--marigold)); 
            color: white; padding: 40px 15px; text-align: center;
            border-bottom: 8px solid var(--temple-red);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* FLOWER GARLAND (Thornalu): Added below the header */
        .garland {
            height: 25px;
            background: radial-gradient(circle, #ffeb3b 20%, transparent 20%),
                        radial-gradient(circle, #f37021 20%, transparent 20%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            width: 100%;
        }

        .container { max-width: 480px; margin: 0 auto; padding: 20px; }

        /* DIVINE CARD: Featuring floral borders */
        .divine-card { 
            background: white; border-radius: 20px; padding: 30px; 
            border: 4px double var(--marigold);
            box-shadow: 0 10px 30px rgba(142, 0, 0, 0.1);
            position: relative;
        }

        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; font-weight: 700; color: var(--temple-red); margin-bottom: 5px; }
        .input-group input, .input-group textarea {
            width: 100%; padding: 12px; border: 1.5px solid #ffd180; border-radius: 12px;
            background: #fffcf5;
        }

        /* PRICE DISPLAY: Highlighted with a floral icon */
        .price-section {
            background: #fff3e0; border-radius: 15px; padding: 20px;
            text-align: center; margin: 20px 0; border: 1px solid var(--marigold);
        }
        .price-total { font-size: 30px; font-weight: 800; color: var(--temple-red); }

        /* TICKET: Designed to look like a traditional invitation with flowers */
        .ticket { 
            background: #fff; border: 2px solid #ddd; border-radius: 15px; 
            padding: 25px; position: relative; overflow: hidden;
        }
        .ticket::before { 
            content: 'üå∏'; position: absolute; top: 10px; right: 10px; font-size: 30px; opacity: 0.2; 
        }

        .btn { 
            width: 100%; padding: 16px; border: none; border-radius: 12px; 
            font-weight: 700; cursor: pointer; display: flex; align-items: center; 
            justify-content: center; gap: 10px; margin-top: 15px; font-size: 16px;
        }
        .btn-divine { background: linear-gradient(to right, var(--marigold), #ff9800); color: white; }
        .btn-wa { background: var(--leaf-green); color: white; }
        .btn-save { background: #455a64; color: white; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="floral-bg"></div>

<header>
    <h1 style="margin:0; font-size: 26px;">‡∞∂‡±ç‡∞∞‡±Ä ‡∞™‡±ã‡∞≤‡±á‡∞∞‡∞Æ‡±ç‡∞Æ ‡∞§‡∞≤‡±ç‡∞≤‡∞ø ‡∞¶‡±á‡∞µ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç</h1>
    <p style="margin:5px 0 0; font-weight: 300;">Digital Floral Seva Portal</p>
</header>
<div class="garland"></div>

<div class="container">
    <div id="bookingUI" class="divine-card">
        <div style="text-align: center; margin-bottom: 20px;">
            <span style="font-size: 40px;">üåº</span>
            <h2 style="color: var(--marigold); margin: 5px 0;">‡∞™‡±Ç‡∞ú‡∞æ ‡∞¨‡±Å‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç</h2>
        </div>

        <form id="pForm">
            <div class="input-group">
                <label>‡∞≠‡∞ï‡±ç‡∞§‡±Å‡∞®‡∞ø ‡∞™‡±á‡∞∞‡±Å (Name)</label>
                <input type="text" id="name" placeholder="‡∞Æ‡±Ä ‡∞™‡±á‡∞∞‡±Å" required>
            </div>
            <div class="input-group">
                <label>‡∞Æ‡±ä‡∞¨‡±à‡∞≤‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç</label>
                <input type="tel" id="phone" maxlength="10" placeholder="‡∞Æ‡±ä‡∞¨‡±à‡∞≤‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç" required>
            </div>
            <div class="input-group">
                <label>‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞Ç</label>
                <input type="text" id="gothram" placeholder="‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞Ç">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="input-group">
                    <label>‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠ ‡∞®‡±Ü‡∞≤</label>
                    <input type="month" id="sMonth" required>
                </div>
                <div class="input-group">
                    <label>‡∞Æ‡±Å‡∞ó‡∞ø‡∞Ç‡∞™‡±Å ‡∞®‡±Ü‡∞≤</label>
                    <input type="month" id="eMonth" required>
                </div>
            </div>

            <div class="price-section">
                <span id="livePrice" class="price-total">‚Çπ 100</span><br>
                <small id="monthText">1 Month Selected (‚Çπ100/mo)</small>
            </div>

            <button type="submit" class="btn btn-divine">Generate Floral Receipt</button>
        </form>
    </div>

    <div id="receiptUI" class="hidden">
        <div id="captureArea" class="ticket">
            <div style="text-align: center; border-bottom: 2px dashed var(--marigold); padding-bottom: 15px; margin-bottom: 20px;">
                <span style="font-size: 24px;">üå∏</span>
                <h3 style="margin:5px 0; color: var(--temple-red);">OFFICIAL RECEIPT</h3>
                <small id="res-id" style="color: #666;"></small>
            </div>
            
            <div id="res-details">
                </div>

            <div style="display: flex; justify-content: center; margin: 20px 0;">
                <div id="qrcode"></div>
            </div>
            
            <p style="text-align: center; font-size: 11px; color: #aaa; margin: 0;">Issued on: <span id="issue-date"></span></p>
        </div>

        <div class="btn-group">
            <button onclick="saveTicket()" class="btn btn-save"><i class="fas fa-file-image"></i> Save Image</button>
            <button onclick="shareWA()" class="btn btn-wa"><i class="fab fa-whatsapp"></i> Share on WhatsApp</button>
            <button onclick="location.reload()" class="btn" style="background:#eee; color:#333;">New Booking</button>
        </div>
    </div>
</div>

<script>
    /**
     * DYNAMIC PRICING LOGIC
     * Calculates ‚Çπ100 per month based on date difference.
     */
    const sIn = document.getElementById('sMonth');
    const eIn = document.getElementById('eMonth');

    function updatePrice() {
        if(!sIn.value || !eIn.value) return;
        const d1 = new Date(sIn.value);
        const d2 = new Date(eIn.value);
        let months = (d2.getFullYear() - d1.getFullYear()) * 12 + (d2.getMonth() - d1.getMonth()) + 1;
        if(months < 1) months = 1;
        document.getElementById('livePrice').innerText = `‚Çπ ${months * 100}`;
        document.getElementById('monthText').innerText = `${months} Month(s) Selected`;
        return months * 100;
    }

    sIn.onchange = updatePrice;
    eIn.onchange = updatePrice;

    /**
     * TICKET GENERATION
     */
    document.getElementById('pForm').onsubmit = (e) => {
        e.preventDefault();
        const total = updatePrice();
        const tid = "POL-FLR-" + Math.random().toString(36).substr(2, 6).toUpperCase();
        const now = new Date().toLocaleDateString('en-IN');

        document.getElementById('res-id').innerText = "ID: " + tid;
        document.getElementById('issue-date').innerText = now;
        
        document.getElementById('res-details').innerHTML = `
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f9f9f9;">
                <span style="color:#888;">‡∞≠‡∞ï‡±ç‡∞§‡±Å‡∞°‡±Å:</span><b style="color:#222;">${document.getElementById('name').value}</b>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f9f9f9;">
                <span style="color:#888;">‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞Ç:</span><b>${document.getElementById('gothram').value || '---'}</b>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f9f9f9;">
                <span style="color:#888;">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç:</span><b style="color:var(--leaf-green);">‚Çπ ${total}/-</b>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f9f9f9;">
                <span style="color:#888;">‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø:</span><b>${sIn.value} to ${eIn.value}</b>
            </div>
        `;

        // QR Code
        document.getElementById("qrcode").innerHTML = "";
        new QRCode(document.getElementById("qrcode"), { text: tid, width: 120, height: 120, colorDark: "#8e0000" });

        document.getElementById('bookingUI').classList.add('hidden');
        document.getElementById('receiptUI').classList.remove('hidden');
        window.scrollTo(0,0);
    };

    /**
     * SAVE IMAGE
     */
    async function saveTicket() {
        Swal.fire({ title: 'Downloading Divine Ticket...', didOpen: () => Swal.showLoading() });
        const canvas = await html2canvas(document.getElementById('captureArea'), { scale: 3 });
        const link = document.createElement('a');
        link.download = `Poleramma_Floral_Ticket.png`;
        link.href = canvas.toDataURL(); link.click();
        Swal.close();
    }

    /**
     * WHATSAPP SHARE
     */
    function shareWA() {
        const name = document.getElementById('name').value;
        const msg = `*‡∞∂‡±ç‡∞∞‡±Ä ‡∞™‡±ã‡∞≤‡±á‡∞∞‡∞Æ‡±ç‡∞Æ ‡∞§‡∞≤‡±ç‡∞≤‡∞ø ‡∞™‡±ç‡∞∞‡∞∏‡∞æ‡∞¶‡∞Ç* üå∏%0A--------------------------%0A‡∞≠‡∞ï‡±ç‡∞§‡±Å‡∞®‡∞ø ‡∞™‡±á‡∞∞‡±Å: ${name}%0A‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç: ${document.getElementById('livePrice').innerText}%0A‡∞§‡±á‡∞¶‡±Ä: ${document.getElementById('issue-date').innerText}%0A_‡∞ì‡∞Ç ‡∞®‡∞Æ‡±ã ‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£‡∞ø!_`;
        window.open(`https://wa.me/91${document.getElementById('phone').value}?text=${msg}`, '_blank');
    }
</script>

</body>
                                   </html>
                                                               
